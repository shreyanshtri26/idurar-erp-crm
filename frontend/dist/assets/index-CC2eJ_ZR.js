import{a as l,aT as e}from"./index--J6gaKqH.js";import{u as I}from"./useDate-BUBJ-65Y.js";import{c as g}from"./calculate-Bl1nHP9U.js";import{ac as v,aa as p,ae as o,af as j}from"./erpOs-CMKQyu82.js";import{I as f}from"./index-CGa66d7n.js";import{D as b}from"./DeleteOutlined-DpfJlTkJ.js";function M({field:t,remove:x,current:c=null}){const[d,y]=l.useState(void 0),[i,a]=l.useState(0),[m,u]=l.useState(0),r=I(),N=n=>{u(n)},_=n=>{a(n)};return l.useEffect(()=>{if(c){const{items:n,invoice:h}=c;if(h){const s=h[t.fieldKey];s&&(u(s.quantity),a(s.price))}else{const s=n[t.fieldKey];s&&(u(s.quantity),a(s.price))}}},[c]),l.useEffect(()=>{const n=g.multiply(i,m);y(n)},[i,m]),e.jsxs(v,{gutter:[12,12],style:{position:"relative"},children:[e.jsx(p,{className:"gutter-row",span:5,children:e.jsx(o.Item,{name:[t.name,"itemName"],rules:[{required:!0,message:"Missing itemName name"},{pattern:/^(?!\s*$)[\s\S]+$/,message:"Item Name must contain alphanumeric or special characters"}],children:e.jsx(j,{placeholder:"Item Name"})})}),e.jsx(p,{className:"gutter-row",span:7,children:e.jsx(o.Item,{name:[t.name,"description"],children:e.jsx(j,{placeholder:"description Name"})})}),e.jsx(p,{className:"gutter-row",span:3,children:e.jsx(o.Item,{name:[t.name,"quantity"],rules:[{required:!0}],children:e.jsx(f,{style:{width:"100%"},min:0,onChange:N})})}),e.jsx(p,{className:"gutter-row",span:4,children:e.jsx(o.Item,{name:[t.name,"price"],rules:[{required:!0}],children:e.jsx(f,{className:"moneyInput",onChange:_,min:0,controls:!1,addonAfter:r.currency_position==="after"?r.currency_symbol:void 0,addonBefore:r.currency_position==="before"?r.currency_symbol:void 0})})}),e.jsx(p,{className:"gutter-row",span:5,children:e.jsx(o.Item,{name:[t.name,"total"],children:e.jsx(o.Item,{children:e.jsx(f,{readOnly:!0,className:"moneyInput",value:d,min:0,controls:!1,addonAfter:r.currency_position==="after"?r.currency_symbol:void 0,addonBefore:r.currency_position==="before"?r.currency_symbol:void 0,formatter:n=>r.amountFormatter({amount:n,currency_code:r.currency_code})})})})}),e.jsx("div",{style:{position:"absolute",right:"-20px",top:" 5px"},children:e.jsx(b,{onClick:()=>x(t.name)})})]})}function A({updatePrice:t,value:x=0,readOnly:c=!1}){const{amountFormatter:d,currency_symbol:y,currency_position:i,cent_precision:a,currency_code:m}=I();return e.jsx(o.Item,{children:e.jsx(f,{readOnly:c,className:"moneyInput",onChange:t,precision:a||2,value:d({amount:x,currency_code:m}),controls:!1,addonAfter:i==="after"?y:void 0,addonBefore:i==="before"?y:void 0,formatter:u=>d({amount:u,currency_code:m})})})}export{M as I,A as M};
